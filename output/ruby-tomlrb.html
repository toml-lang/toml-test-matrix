<pre>
tomlrb version 4edc50c
<b>FAIL</b> <b>valid/key/like-date</b>
<b> </b>    /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:28:in `rescue in parse': parse error on value ["2001", "02", "03", nil, nil, nil, nil] (DATETIME) (Tomlrb::ParseError)
<b> </b>    	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:25:in `parse'
<b> </b>    	from ./ruby-tomlrb-decoder:35:in `<main>'
<b> </b>    /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:536:in `on_error': parse error on value ["2001", "02", "03", nil, nil, nil, nil] (DATETIME) (Racc::ParseError)
<b> </b>    	from /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:263:in `_racc_do_parse_c'
<b> </b>    	from /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:263:in `do_parse'
<b> </b>    	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb/parser.rb:16:in `parse'
<b> </b>    	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:26:in `parse'
<b> </b>    	from ./ruby-tomlrb-decoder:35:in `<main>'
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       # '-' is a valid character in keys: make a key that looks like a date.
       2001-02-03   = 1
       "2001-02-04" = 2
       '2001-02-05' = 3

       # Also include datetime and time for good measure; these need to be quoted as
       # ':' isn't a valid bare key.
       "2001-02-06T15:16:17+01:00" = 4
       "2001-02-07T15:16:17"       = 5
       "15:16:17"                  = 6

       # Dotted keys
       a.2001-02-08 = 7
       a.2001-02-09.2001-02-10 = 8
       2001-02-11.a.2001-02-12 = 9

       # Table names
       [2002-01-02]
       k = 10

       [2002-01-02.2024-01-03]
       k = 11

       [[2002-01-04]]
       k = 12

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:28:in `rescue in parse': parse error on value ["2001", "02", "03", nil, nil, nil, nil] (DATETIME) (Tomlrb::ParseError)
       	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:25:in `parse'
       	from ./ruby-tomlrb-decoder:35:in `<main>'
       /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:536:in `on_error': parse error on value ["2001", "02", "03", nil, nil, nil, nil] (DATETIME) (Racc::ParseError)
       	from /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:263:in `_racc_do_parse_c'
       	from /home/martin/.local/share/gem/ruby/3.3.0/gems/racc-1.8.1/lib/racc/parser.rb:263:in `do_parse'
       	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb/parser.rb:16:in `parse'
       	from /home/martin/code/Toml/toml-test-matrix/src/ruby-tomlrb/lib/tomlrb.rb:26:in `parse'
       	from ./ruby-tomlrb-decoder:35:in `<main>'

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>invalid/array/double-comma-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       double-comma-1 = [1,,2]

<b>     output from parser-cmd (stdout):</b>
       {
         "double-comma-1": [
           {"type": "integer", "value": "1"},
           {"type": "integer", "value": "2"}
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/array/double-comma-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       double-comma-2 = [1,2,,]

<b>     output from parser-cmd (stdout):</b>
       {
         "double-comma-2": [
           {"type": "integer", "value": "1"},
           {"type": "integer", "value": "2"}
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/array/only-comma-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       only-comma-1 = [,]

<b>     output from parser-cmd (stdout):</b>
       {
         "only-comma-1": []
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/array/only-comma-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       only-comma-2 = [,,]

<b>     output from parser-cmd (stdout):</b>
       {
         "only-comma-2": []
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-cr   = """null"""

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-cr": {"type": "string", "value": "null\r"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-cr   = '''null'''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-cr": {"type": "string", "value": "null\r"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "datetime", "value": "2100-03-01T15:15:15Z"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "datetime", "value": "1988-03-01T15:15:15Z"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/duplicate-key-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       tbl = { fruit = { apple.color = "red" }, fruit.apple.texture = { smooth = true } }

<b>     output from parser-cmd (stdout):</b>
       {
         "tbl": {
           "fruit": {
             "apple": {
               "color": {"type": "string", "value": "red"},
               "texture": {
                 "smooth": {"type": "bool", "value": "true"}
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-03</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = { b = 1 }
       a.b = 2

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {"type": "integer", "value": "2"}
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-08</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       tab = { inner = { dog = "best" }, inner.cat = "worst" }

<b>     output from parser-cmd (stdout):</b>
       {
         "tab": {
           "inner": {
             "cat": {"type": "string", "value": "worst"},
             "dog": {"type": "string", "value": "best"}
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/key/dotted-redefine-table-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = false
       a.b = true

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {"type": "bool", "value": "true"}
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "date-local", "value": "2100-03-01"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "date-local", "value": "1988-03-01"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "datetime-local", "value": "2100-03-01T15:15:15"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "datetime-local", "value": "1988-03-01T15:15:15"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/hour-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-hour       = 2DIGIT  ; 00-23
       d = 2006-01-01T24:00:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {"type": "datetime-local", "value": "2006-01-02T00:00:00"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-time/hour-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-hour       = 2DIGIT  ; 00-23
       d = 24:00:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {"type": "time-local", "value": "00:00:00"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/bad-escape-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       backslash = "\"

<b>     output from parser-cmd (stdout):</b>
       {
         "backslash": {"type": "string", "value": "\\"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/super-twice</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [a.b]
       [a]
       [a]

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {}
         }
       }

<b>     want:</b>
       Exit code 1

toml-test v2025-04-21 [./ruby-tomlrb-decoder]: using embedded tests
  valid tests: 194 passed,  1 failed
invalid tests: 357 passed, 20 failed

==> ENCODER TESTS
(not supported)
took 4.4 2.73
</pre>
