<pre>
toml version ecb24de
<b>FAIL</b> <b>valid/array/array</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12 13 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>              12 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2 11 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8 10 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  9 (save-module-excursion _)
<b> </b>      4408:12  8 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  7 (_)
<b> </b>    In toml/parser.scm:
<b> </b>        190:6  6 (peg-tree->scm _)
<b> </b>       280:18  5 (add-kv-to-tree (("strings" . #((("value" . "a") ("type" . "string")) (("value" . "b") ("type" . "string")) (("value" . "c") ("type" . "string")))) ("floats" . #((("value" . "1.1") ("type" . "float")) (("value" . "2.1") ("type" . "float")) (("value" . "3.1") ("type" . "float")))) ("ints" . #((("value" . "1") ("type" . "integer")) (("value" . "2") ("type" . "integer")) (("value" . "3") ("type" . "integer"))))) _ _)
<b> </b>       167:23  4 (loop _)
<b> </b>    In test/test-decoder.scm:
<b> </b>        14:21  3 (test-value->scm _)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       222:29  2 (map1 ((datetime "1987-07-05T17:45:00Z") datetime-local "1979-05-27T07:32:00" date-local "2006-06-01" time-local "11:00:00"))
<b> </b>       222:17  1 (map1 (datetime-local "1979-05-27T07:32:00" date-local "2006-06-01" time-local "11:00:00"))
<b> </b>    In test/test-decoder.scm:
<b> </b>         41:9  0 (test-value->scm datetime-local)
<b> </b>
<b> </b>    test/test-decoder.scm:41:9: In procedure test-value->scm:
<b> </b>    err: ~a datetime-local
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       ints = [1, 2, 3, ]
       floats = [1.1, 2.1, 3.1]
       strings = ["a", "b", "c"]
       dates = [
       	1987-07-05T17:45:00Z,
       	1979-05-27T07:32:00,
       	2006-06-01,
       	11:00:00,
       ]
       comments = [
                1,
                2, #this is ok
       ]

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12 13 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                 12 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2 11 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8 10 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  9 (save-module-excursion _)
         4408:12  8 (_)
       In test/test-decoder.scm:
           58:14  7 (_)
       In toml/parser.scm:
           190:6  6 (peg-tree->scm _)
          280:18  5 (add-kv-to-tree (("strings" . #((("value" . "a") ("type" . "string")) (("value" . "b") ("type" . "string")) (("value" . "c") ("type" . "string")))) ("floats" . #((("value" . "1.1") ("type" . "float")) (("value" . "2.1") ("type" . "float")) (("value" . "3.1") ("type" . "float")))) ("ints" . #((("value" . "1") ("type" . "integer")) (("value" . "2") ("type" . "integer")) (("value" . "3") ("type" . "integer"))))) _ _)
          167:23  4 (loop _)
       In test/test-decoder.scm:
           14:21  3 (test-value->scm _)
       In ice-9/boot-9.scm:
          222:29  2 (map1 ((datetime "1987-07-05T17:45:00Z") datetime-local "1979-05-27T07:32:00" date-local "2006-06-01" time-local "11:00:00"))
          222:17  1 (map1 (datetime-local "1979-05-27T07:32:00" date-local "2006-06-01" time-local "11:00:00"))
       In test/test-decoder.scm:
            41:9  0 (test-value->scm datetime-local)

       test/test-decoder.scm:41:9: In procedure test-value->scm:
       err: ~a datetime-local

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/inline-table/array-02</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12 13 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>              12 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2 11 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8 10 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  9 (save-module-excursion _)
<b> </b>      4408:12  8 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  7 (_)
<b> </b>    In toml/parser.scm:
<b> </b>        190:6  6 (peg-tree->scm _)
<b> </b>       280:18  5 (add-kv-to-tree () _ _)
<b> </b>       167:23  4 (loop _)
<b> </b>        190:6  3 (peg-tree->scm _)
<b> </b>       280:18  2 (add-kv-to-tree () _ _)
<b> </b>       167:23  1 (loop _)
<b> </b>    In test/test-decoder.scm:
<b> </b>         41:9  0 (test-value->scm array)
<b> </b>
<b> </b>    test/test-decoder.scm:41:9: In procedure test-value->scm:
<b> </b>    err: ~a array
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       # "No newlines are allowed between the curly braces unless they are valid within
       # a value"

       a = { a = [
       ]}

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12 13 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                 12 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2 11 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8 10 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  9 (save-module-excursion _)
         4408:12  8 (_)
       In test/test-decoder.scm:
           58:14  7 (_)
       In toml/parser.scm:
           190:6  6 (peg-tree->scm _)
          280:18  5 (add-kv-to-tree () _ _)
          167:23  4 (loop _)
           190:6  3 (peg-tree->scm _)
          280:18  2 (add-kv-to-tree () _ _)
          167:23  1 (loop _)
       In test/test-decoder.scm:
            41:9  0 (test-value->scm array)

       test/test-decoder.scm:41:9: In procedure test-value->scm:
       err: ~a array

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/key/dotted-empty</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12  9 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>               8 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2  7 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8  6 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  5 (save-module-excursion _)
<b> </b>      4408:12  4 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  3 (_)
<b> </b>    In toml/parser.scm:
<b> </b>       367:45  2 (peg-tree->scm _)
<b> </b>    In srfi/srfi-1.scm:
<b> </b>       586:17  1 (map1 ((simple-key (simple-key "x"))))
<b> </b>    In unknown file:
<b> </b>               0 (string-join (simple-key "x") "" #<undefined>)
<b> </b>
<b> </b>    ERROR: In procedure string-join:
<b> </b>    In procedure string-append: Wrong type (expecting string): simple-key
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       ''.x = "empty.x"
       x."" = "x.empty"
       [a]
       "".'' = "empty.empty"

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12  9 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                  8 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2  7 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8  6 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  5 (save-module-excursion _)
         4408:12  4 (_)
       In test/test-decoder.scm:
           58:14  3 (_)
       In toml/parser.scm:
          367:45  2 (peg-tree->scm _)
       In srfi/srfi-1.scm:
          586:17  1 (map1 ((simple-key (simple-key "x"))))
       In unknown file:
                  0 (string-join (simple-key "x") "" #<undefined>)

       ERROR: In procedure string-join:
       In procedure string-append: Wrong type (expecting string): simple-key

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec-1.0.0/table-9</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12  8 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>               7 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2  6 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8  5 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  4 (save-module-excursion _)
<b> </b>      4408:12  3 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  2 (_)
<b> </b>    In toml/parser.scm:
<b> </b>       386:13  1 (peg-tree->scm _)
<b> </b>        315:4  0 (check-explicit-table-keys _ _ _)
<b> </b>
<b> </b>    toml/parser.scm:315:4: In procedure check-explicit-table-keys:
<b> </b>    guile-toml: redefinition not allowed ("fruit" "apple" "texture") (("fruit" "apple" "taste") ("fruit" "apple") ("fruit")) 1
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.color = "red"
       apple.taste.sweet = true

       # [fruit.apple]  # INVALID
       # [fruit.apple.taste]  # INVALID

       [fruit.apple.texture]  # you can add sub-tables
       smooth = true

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12  8 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                  7 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2  6 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8  5 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  4 (save-module-excursion _)
         4408:12  3 (_)
       In test/test-decoder.scm:
           58:14  2 (_)
       In toml/parser.scm:
          386:13  1 (peg-tree->scm _)
           315:4  0 (check-explicit-table-keys _ _ _)

       toml/parser.scm:315:4: In procedure check-explicit-table-keys:
       guile-toml: redefinition not allowed ("fruit" "apple" "texture") (("fruit" "apple" "taste") ("fruit" "apple") ("fruit")) 1

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/table/array-within-dotted</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12  8 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>               7 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2  6 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8  5 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  4 (save-module-excursion _)
<b> </b>      4408:12  3 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  2 (_)
<b> </b>    In toml/parser.scm:
<b> </b>        399:9  1 (peg-tree->scm _)
<b> </b>        315:4  0 (check-explicit-table-keys _ _ _)
<b> </b>
<b> </b>    toml/parser.scm:315:4: In procedure check-explicit-table-keys:
<b> </b>    guile-toml: redefinition not allowed ("fruit" "apple" "seeds") (("fruit")) 0
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.color = "red"

       [[fruit.apple.seeds]]
       size = 2

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12  8 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                  7 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2  6 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8  5 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  4 (save-module-excursion _)
         4408:12  3 (_)
       In test/test-decoder.scm:
           58:14  2 (_)
       In toml/parser.scm:
           399:9  1 (peg-tree->scm _)
           315:4  0 (check-explicit-table-keys _ _ _)

       toml/parser.scm:315:4: In procedure check-explicit-table-keys:
       guile-toml: redefinition not allowed ("fruit" "apple" "seeds") (("fruit")) 0

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/table/empty-name</b>
<b> </b>    Backtrace:
<b> </b>    In ice-9/boot-9.scm:
<b> </b>      1755:12  9 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
<b> </b>    In unknown file:
<b> </b>               8 (apply-smob/0 #<thunk â€¦>)
<b> </b>    In ice-9/boot-9.scm:
<b> </b>        724:2  7 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
<b> </b>    In ice-9/eval.scm:
<b> </b>        619:8  6 (_ #(#(#<directory (guile-user) â€¦>)))
<b> </b>    In ice-9/boot-9.scm:
<b> </b>       2858:4  5 (save-module-excursion _)
<b> </b>      4408:12  4 (_)
<b> </b>    In test/test-decoder.scm:
<b> </b>        58:14  3 (_)
<b> </b>    In toml/parser.scm:
<b> </b>       376:22  2 (peg-tree->scm _)
<b> </b>    In srfi/srfi-1.scm:
<b> </b>       586:17  1 (map1 ((simple-key (simple-key "a"))))
<b> </b>    In unknown file:
<b> </b>               0 (string-join (simple-key "a") "" #<undefined>)
<b> </b>
<b> </b>    ERROR: In procedure string-join:
<b> </b>    In procedure string-append: Wrong type (expecting string): simple-key
<b> </b>
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       ['']
       x = 1

       ["".a]
       x = 2

       [a.'']
       x = 3

<b>     output from parser-cmd (stderr):</b>
       Backtrace:
       In ice-9/boot-9.scm:
         1755:12  9 (with-exception-handler _ _ #:unwind? _ #:unwind-for-type _)
       In unknown file:
                  8 (apply-smob/0 #<thunk â€¦>)
       In ice-9/boot-9.scm:
           724:2  7 (call-with-prompt _ _ #<procedure default-prompt-handler (k proc)>)
       In ice-9/eval.scm:
           619:8  6 (_ #(#(#<directory (guile-user) â€¦>)))
       In ice-9/boot-9.scm:
          2858:4  5 (save-module-excursion _)
         4408:12  4 (_)
       In test/test-decoder.scm:
           58:14  3 (_)
       In toml/parser.scm:
          376:22  2 (peg-tree->scm _)
       In srfi/srfi-1.scm:
          586:17  1 (map1 ((simple-key (simple-key "a"))))
       In unknown file:
                  0 (string-join (simple-key "a") "" #<undefined>)

       ERROR: In procedure string-join:
       In procedure string-append: Wrong type (expecting string): simple-key

       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>invalid/array/extend-defined-aot</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [[tab.arr]]
       [tab]
       arr.val1=1

<b>     output from parser-cmd (stdout):</b>
       {
         "tab": {"arr": [{
           "val1": {"type": "integer", "value": "1"}
         }]}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "datetime", "value": "2100-02-29T15:15:15Z"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "datetime", "value": "1988-02-30T15:15:15Z"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/offset-overflow-hour</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # Hour must be 00-24
       d = 1985-06-18 17:04:07+25:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {"type": "datetime", "value": "1985-06-18 17:04:07+25:00"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/duplicate-key-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       tbl = { fruit = { apple.color = "red" }, fruit.apple.texture = { smooth = true } }

<b>     output from parser-cmd (stdout):</b>
       {
         "tbl": {
           "fruit": {
             "apple": {
               "color": {"type": "string", "value": "red"},
               "texture": {
                 "smooth": {"type": "bool", "value": "true"}
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-07</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       tab = { inner.table = [{}], inner.table.val = "bad" }

<b>     output from parser-cmd (stdout):</b>
       {
         "tab": {
           "inner": {"table": [{
             "val": {"type": "string", "value": "bad"}
           }]}
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-08</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       tab = { inner = { dog = "best" }, inner.cat = "worst" }

<b>     output from parser-cmd (stdout):</b>
       {
         "tab": {
           "inner": {
             "cat": {"type": "string", "value": "worst"},
             "dog": {"type": "string", "value": "best"}
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "date-local", "value": "2100-02-29"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "date-local", "value": "1988-02-30"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {"type": "datetime-local", "value": "2100-02-29T15:15:15"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {"type": "datetime-local", "value": "1988-02-30T15:15:15"}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/spec-1.0.0/inline-table-2-0</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [product]
       type = { name = "Nail" }
       type.edible = false  # INVALID

<b>     output from parser-cmd (stdout):</b>
       {
         "product": {
           "type": {
             "edible": {"type": "bool", "value": "false"},
             "name":   {"type": "string", "value": "Nail"}
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/append-to-array-with-dotted-keys</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [[a.b]]

       [a]
       b.y = 2

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {"b": [{
           "y": {"type": "integer", "value": "2"}
         }]}
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/redefine-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [t1]
       t2.t3.v = 0
       [t1.t2]

<b>     output from parser-cmd (stdout):</b>
       {
         "t1": {
           "t2": {
             "t3": {
               "v": {"type": "integer", "value": "0"}
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

toml-test v2025-04-21 [./test/test-decoder.scm]: using embedded tests
  valid tests: 198 passed,  6 failed
invalid tests: 384 passed, 14 failed

==> ENCODER TESTS
<b>FAIL</b> <b>valid/inline-table/array-02</b>
<b> </b>    Could not find key "a.a" in encoder output

<b>     input sent to parser-cmd:</b>
       {
           "a": {"a": []}
       }

<b>     output from parser-cmd (stdout):</b>
       ["a"]

<b>     want:</b>
       # "No newlines are allowed between the curly braces unless they are valid within
       # a value"

       a = { a = [
       ]}

<b>FAIL</b> <b>valid/multibyte</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 6 (last key "\"ğ­ğ›ğ¥\".sub"): expected a top-level item to end with a newline, comment, or EOF, but got 'Æ¨' instead

<b>     input sent to parser-cmd:</b>
       {
           "ğ­ğ›ğ¥": {
               "string": {"type": "string", "value": "ğ“¼ğ“½ğ“»ğ“²ğ“·ğ“° - #"},
               "sub": {
                   "another_test_string": {"type": "string", "value": "Â§Ã¡â‚¥Ã¨ Æ­Î»Ã¯Ã±Ï±, Î²ÃºÆ­ Ï‰Ã¯Æ­Î» Ã¡ Æ¨Æ­Å™Ã¯Ã±Ï± #"},
                   "escapes":             {"type": "string", "value": " Ã‚Ã±Î´ Ï‰Î»Ã¨Ã± \"'Æ¨ Ã¡Å™Ã¨ Ã¯Ã± Æ­Î»Ã¨ Æ¨Æ­Å™Ã¯Ã±Ï±, Ã¡â„“Ã´Ã±Ï± Ï‰Ã¯Æ­Î» # \""},
                   "Î²Ã¯Æ­#": {
                       "multi_line_array": [{"type": "string", "value": "]"}],
                       "Ï‰Î»Ã¡Æ­?":            {"type": "string", "value": "ÃÃ´Ãº Î´Ã´Ã±'Æ­ Æ­Î»Ã¯Ã±Æ™ Æ¨Ã´â‚¥Ã¨ ÃºÆ¨Ã¨Å™ Ï‰Ã´Ã±'Æ­ Î´Ã´ Æ­Î»Ã¡Æ­?"}
                   },
                   "ğ•’ğ•£ğ•£ğ•’ğ•ª": [
                       {"type": "string", "value": "] "},
                       {"type": "string", "value": " # "}
                   ],
                   "ğ•’ğ•£ğ•£ğ•’ğ•ªğŸš": [
                       {"type": "string", "value": "TÃ¨Æ¨Æ­ #11 ]Æ¥Å™Ã´Æ²Ã¨Î´ Æ­Î»Ã¡Æ­"},
                       {"type": "string", "value": "Ã‰Ğ¶Æ¥Ã¨Å™Ã¯â‚¥Ã¨Ã±Æ­ #9 Ï‰Ã¡Æ¨ Ã¡ Æ¨ÃºÃ§Ã§Ã¨Æ¨Æ¨"}
                   ]
               }
           }
       }

<b>     output from parser-cmd (stdout):</b>
       ["ğ­ğ›ğ¥"]
       "string" = "ğ“¼ğ“½ğ“»ğ“²ğ“·ğ“° - #"
       ["ğ­ğ›ğ¥"."sub"]
       "ğ•’ğ•£ğ•£ğ•’ğ•ªğŸš" = ["TÃ¨Æ¨Æ­ #11 ]Æ¥Å™Ã´Æ²Ã¨Î´ Æ­Î»Ã¡Æ­", "Ã‰Ğ¶Æ¥Ã¨Å™Ã¯â‚¥Ã¨Ã±Æ­ #9 Ï‰Ã¡Æ¨ Ã¡ Æ¨ÃºÃ§Ã§Ã¨Æ¨Æ¨"]
       "ğ•’ğ•£ğ•£ğ•’ğ•ª" = ["] ", " # "]
       "escapes" = ' Ã‚Ã±Î´ Ï‰Î»Ã¨Ã± "'Æ¨ Ã¡Å™Ã¨ Ã¯Ã± Æ­Î»Ã¨ Æ¨Æ­Å™Ã¯Ã±Ï±, Ã¡â„“Ã´Ã±Ï± Ï‰Ã¯Æ­Î» # "'
       "another_test_string" = "Â§Ã¡â‚¥Ã¨ Æ­Î»Ã¯Ã±Ï±, Î²ÃºÆ­ Ï‰Ã¯Æ­Î» Ã¡ Æ¨Æ­Å™Ã¯Ã±Ï± #"
       ["ğ­ğ›ğ¥"."sub"."Î²Ã¯Æ­#"]
       "Ï‰Î»Ã¡Æ­?" = "ÃÃ´Ãº Î´Ã´Ã±'Æ­ Æ­Î»Ã¯Ã±Æ™ Æ¨Ã´â‚¥Ã¨ ÃºÆ¨Ã¨Å™ Ï‰Ã´Ã±'Æ­ Î´Ã´ Æ­Î»Ã¡Æ­?"
       "multi_line_array" = ["]"]

<b>     want:</b>
       # Test multibyte throughout

       # TÃ¨Æ¨Æ­ Æ’Ã¯â„“Ã¨ Æ’Ã´Å™ TÃ“MÂ£
       # Ã“Ã±â„“Â¥ Æ­Î»Ã¯Æ¨ Ã´Ã±Ã¨ Æ­Å™Ã¯Ã¨Æ¨ Æ­Ã´ Ã¨â‚¥Ãºâ„“Ã¡Æ­Ã¨ Ã¡ TÃ“MÂ£ Æ’Ã¯â„“Ã¨ Ï‰Å™Ã¯Æ­Æ­Ã¨Ã± Î²Â¥ Ã¡ ÃºÆ¨Ã¨Å™ Ã´Æ’ Æ­Î»Ã¨ Æ™Ã¯Ã±Î´ Ã´Æ’ Æ¥Ã¡Å™Æ¨Ã¨Å™ Ï‰Å™Ã¯Æ­Ã¨Å™Æ¨ Æ¥Å™Ã´Î²Ã¡Î²â„“Â¥ Î»Ã¡Æ­Ã¨

       ['ğ­ğ›ğ¥']
       string = "ğ“¼ğ“½ğ“»ğ“²ğ“·ğ“° - #"          # " ğ“¼ğ“½ğ“»ğ“²ğ“·ğ“°
       	['ğ­ğ›ğ¥'.sub]
       	'ğ•’ğ•£ğ•£ğ•’ğ•ª' = [ "] ", " # "]      # ] ğ“ªğ“»ğ“»ğ“ªğ”‚
       	'ğ•’ğ•£ğ•£ğ•’ğ•ªğŸš' = [ "TÃ¨Æ¨Æ­ #11 ]Æ¥Å™Ã´Æ²Ã¨Î´ Æ­Î»Ã¡Æ­", "Ã‰Ğ¶Æ¥Ã¨Å™Ã¯â‚¥Ã¨Ã±Æ­ #9 Ï‰Ã¡Æ¨ Ã¡ Æ¨ÃºÃ§Ã§Ã¨Æ¨Æ¨" ]
       	# ÃÃ´Ãº Î´Ã¯Î´Ã±'Æ­ Æ­Î»Ã¯Ã±Æ™ Ã¯Æ­'Î´ Ã¡Æ¨ Ã¨Ã¡Æ¨Â¥ Ã¡Æ¨ Ã§Î»ÃºÃ§Æ™Ã¯Ã±Ï± Ã´ÃºÆ­ Æ­Î»Ã¨ â„“Ã¡Æ¨Æ­ #, Î´Ã¯Î´ Â¥Ã´Ãº?
       	another_test_string = "Â§Ã¡â‚¥Ã¨ Æ­Î»Ã¯Ã±Ï±, Î²ÃºÆ­ Ï‰Ã¯Æ­Î» Ã¡ Æ¨Æ­Å™Ã¯Ã±Ï± #"
       	escapes = " Ã‚Ã±Î´ Ï‰Î»Ã¨Ã± \"'Æ¨ Ã¡Å™Ã¨ Ã¯Ã± Æ­Î»Ã¨ Æ¨Æ­Å™Ã¯Ã±Ï±, Ã¡â„“Ã´Ã±Ï± Ï‰Ã¯Æ­Î» # \""   # "Ã¡Ã±Î´ Ã§Ã´â‚¥â‚¥Ã¨Ã±Æ­Æ¨ Ã¡Å™Ã¨ Æ­Î»Ã¨Å™Ã¨ Æ­Ã´Ã´"
       	# TÎ»Ã¯Ã±Ï±Æ¨ Ï‰Ã¯â„“â„“ Ï±Ã¨Æ­ Î»Ã¡Å™Î´Ã¨Å™
       		['ğ­ğ›ğ¥'.sub."Î²Ã¯Æ­#"]
       		"Ï‰Î»Ã¡Æ­?" = "ÃÃ´Ãº Î´Ã´Ã±'Æ­ Æ­Î»Ã¯Ã±Æ™ Æ¨Ã´â‚¥Ã¨ ÃºÆ¨Ã¨Å™ Ï‰Ã´Ã±'Æ­ Î´Ã´ Æ­Î»Ã¡Æ­?"
       		multi_line_array = [
       			"]",
       			# ] Ã“Î» Â¥Ã¨Æ¨ ÃŒ Î´Ã¯Î´
       			]

<b>FAIL</b> <b>valid/spec-1.0.0/float-0</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 3 (last key "flt5"): Invalid float value: "1e+06.0"

<b>     input sent to parser-cmd:</b>
       {
           "flt1": {"type": "float", "value": "1"},
           "flt2": {"type": "float", "value": "3.1415"},
           "flt3": {"type": "float", "value": "-0.01"},
           "flt4": {"type": "float", "value": "5e+22"},
           "flt5": {"type": "float", "value": "1e+06"},
           "flt6": {"type": "float", "value": "-0.02"},
           "flt7": {"type": "float", "value": "6.626e-34"}
       }

<b>     output from parser-cmd (stdout):</b>
       "flt7" = 6.626e-34
       "flt6" = -0.02
       "flt5" = 1e+06.0
       "flt4" = 5e+22.0
       "flt3" = -0.01
       "flt2" = 3.1415
       "flt1" = 1.0

<b>     want:</b>
       # fractional
       flt1 = +1.0
       flt2 = 3.1415
       flt3 = -0.01

       # exponent
       flt4 = 5e+22
       flt5 = 1e06
       flt6 = -2E-2

       # both
       flt7 = 6.626e-34

<b>FAIL</b> <b>valid/spec-1.0.0/string-0</b>
<b> </b>    Values for key "str" differ:
<b> </b>      Expected:     I'm a string. "You can quote me". Name	JosÃ©
<b> </b>    Location	SF. (string)
<b> </b>      Your encoder: I'm a string. "You can quote me". Name\u0009JosÃ©
<b> </b>    Location\u0009SF. (string)

<b>     input sent to parser-cmd:</b>
       {
           "str": {"type": "string", "value": "I'm a string. \"You can quote me\". Name\tJosÃ©\nLocation\tSF."}
       }

<b>     output from parser-cmd (stdout):</b>
       "str" = '''I'm a string. "You can quote me". Name\u0009JosÃ©
       Location\u0009SF.'''

<b>     want:</b>
       str = "I'm a string. \"You can quote me\". Name\tJos\u00E9\nLocation\tSF."

<b>FAIL</b> <b>valid/spec-1.0.0/string-6</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: expected a top-level item to end with a newline, comment, or EOF, but got 't' instead

<b>     input sent to parser-cmd:</b>
       {
           "lines":  {"type": "string", "value": "The first newline is\ntrimmed in raw strings.\n   All other whitespace\n   is preserved.\n"},
           "regex2": {"type": "string", "value": "I [dw]on't need \\d{2} apples"}
       }

<b>     output from parser-cmd (stdout):</b>
       "regex2" = 'I [dw]on't need \d{2} apples'
       "lines" = """The first newline is
       trimmed in raw strings.
          All other whitespace
          is preserved.
       """

<b>     want:</b>
       regex2 = '''I [dw]on't need \d{2} apples'''
       lines  = '''
       The first newline is
       trimmed in raw strings.
          All other whitespace
          is preserved.
       '''

toml-test v2025-04-21 [./test/test-encoder.scm]: using embedded tests
encoder tests: 199 passed,  5 failed
took 0.0 0.0
</pre>
